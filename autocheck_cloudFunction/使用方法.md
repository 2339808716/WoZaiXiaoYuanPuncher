（因为改了原文件的结构和一些字段名，所以我把文件单独放在一个 autocheck_cloudFunction  文件夹中了。。）

在原有代码的基础上做了一点修改，可以实现**云函数自动打卡 + 消息提醒**。只需要在云端部署函数，本地不需要做任何处理，消息提醒会告知打卡时间和打卡结果。

### 使用方法

1）微信搜索公众号“喵提醒”，注册后新增自定义提醒，生成属于自己的喵码，后面需要用到

2）注册腾讯云账号并实名认证

3）到 https://console.cloud.tencent.com/scf/list?rid=1&ns=default ，选择 “新建云函数” --> “自定义创建”，提交方法选择“本地上传文件夹”，选中 autocheck_cloudFunction 文件夹上传，点击“完成”即可创建云函数

4）到刚才新创建的云函数中，可以看到有两个文件：

* `config.json` 文件：**需要配置“我在校园”和“喵提醒”的账号数据**。文件提供的版本是广财本部校区，需要修改的是 `username` （自己的账号）和 `password`（自己的密码），其他学校可能需要自己抓包，修改对应的地址字段、经纬度字段等；另外，如果想开启消息提醒功能，请将 `isEnable` 修改为 `true`，将 `notifyToken` 修改为之前获取到的喵码。`notifyUser` 是消息提醒时出现的用户名，不改也无所谓
* `index.py` 文件：**无需配置**。基本上和原代码一样。新增 `status_code` 标识打卡结果，包括成功打卡、重复打卡、超时打卡、登录错误以及其它错误；新增 `sendNotification` 函数实现消息提醒

5）修改完成后点击部署并测试，如果微信有收到喵提醒的信息，说明设置 ok

6）实现定时打卡功能：点击控制台左侧的“触发管理”，新建一个云函数触发器。设置如下：

![image-20210802123156661](https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/pr/image-20210802123156661.png)

触发时间使用的是 Cron 表达式，这里的意思是每天 7 点、13 点、19 点各触发（打卡）一次，可以自己修改，按照自己学校规定的打卡时间段来设置。

最后提交就可以了，只要自动打卡成功，手机这边都会收到提醒。

PS：由于微信的额度限制，喵提醒的提醒功能有效期是两天，也就是说，每两天需要向公众号发送一条消息，激活一次，不然失效后无法收到消息提醒。其实不激活也是可以的，因为只要没有收到“我在校园”的打卡提醒，就说明你已经打卡了。